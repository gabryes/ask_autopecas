<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoPeças - Painel de Controle</title>
    <link rel="stylesheet" href="css/control-panel.css">
</head>
<body>
    <div class="control-panel">
        <!-- Header -->
        <div class="header">
            <h1>🚗 AutoPeças Control</h1>
            <p>Painel de Controle do Chatbot</p>
        </div>

        <!-- Controles Principais -->
        <div class="main-controls">
            <div class="control-card">
                <h2>🚀 Sistema Principal</h2>
                <button id="mainPowerBtn" class="power-button start" onclick="toggleSystem()">
                    ▶️
                </button>
                <p id="mainStatus">Sistema Parado</p>
                <div style="margin-top: 20px;">
                    <button class="btn warning" onclick="restartSystem()">🔄 Reiniciar</button>
                </div>
            </div>

            <div class="control-card">
                <h2>📱 WhatsApp</h2>
                <button id="whatsappBtn" class="power-button start" onclick="toggleWhatsApp()">
                    📱
                </button>
                <p id="whatsappStatus">Desconectado</p>
                <div style="margin-top: 20px;">
                    <button class="btn primary" onclick="showQRCode()">📷 Mostrar QR</button>
                </div>
            </div>
        </div>

        <!-- Status dos Serviços -->
        <div class="status-grid">
            <div class="status-card unknown">
                <h3>🗄️ Banco de Dados</h3>
                <div class="service-status">
                    <span id="dbIndicator" class="status-indicator unknown"></span>
                    <span id="dbStatus">Verificando...</span>
                </div>
            </div>
            
            <div class="status-card running">
                <h3>🌐 Servidor API</h3>
                <div class="service-status">
                    <span id="apiIndicator" class="status-indicator running"></span>
                    <span id="apiStatus">Rodando</span>
                </div>
            </div>
            
            <div class="status-card stopped">
                <h3>🤖 Chatbot</h3>
                <div class="service-status">
                    <span id="botIndicator" class="status-indicator stopped"></span>
                    <span id="botStatus">Parado</span>
                </div>
            </div>
            
            <div class="status-card stopped">
                <h3>📦 Produtos</h3>
                <div class="service-status">
                    <span id="productsIndicator" class="status-indicator stopped"></span>
                    <span id="productsCount">0 produtos</span>
                </div>
            </div>
        </div>

        <!-- Controles Rápidos -->
        <div class="logs-section">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3>🎛️ Controles Rápidos</h3>
            </div>
            
            <div class="controls-row">
                <button class="btn primary" onclick="openAdmin()">⚙️ Painel Admin</button>
                <button class="btn success" onclick="testBot()">🧪 Testar Bot</button>
                <button class="btn warning" onclick="viewLogs()">📋 Ver Logs</button>
                <button class="btn secondary" onclick="openDashboard()">📊 Dashboard</button>
                <button class="btn danger" onclick="emergencyStop()">🚨 Parada de Emergência</button>
            </div>
        </div>

        <!-- Logs em Tempo Real -->
        <div class="logs-section">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <h3>📝 Logs do Sistema</h3>
                <div>
                    <button class="btn secondary" onclick="clearLogs()">🧹 Limpar</button>
                    <button class="btn primary" onclick="toggleAutoScroll()">📜 Auto-scroll</button>
                </div>
            </div>
            
            <div id="logsContainer" class="logs-container">
                <div class="log-entry info">
                    <span class="log-timestamp">[Carregando...]</span>
                    <span>🎮 Painel de controle carregado</span>
                </div>
            </div>
        </div>

        <!-- Informações do Sistema -->
        <div class="logs-section">
            <h3>💻 Informações do Sistema</h3>
            <div class="system-info" id="systemInfo">
                <!-- Informações serão carregadas via JavaScript -->
            </div>
        </div>
    </div>

    <!-- Modal QR Code -->
    <div id="qrModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('qrModal')">&times;</span>
            <h3>📱 Conectar WhatsApp</h3>
            <p>Escaneie o QR Code com seu WhatsApp:</p>
            <div class="qr-container">
                <div id="qrCode" style="font-size: 2em;">📷 QR Code aparecerá aqui</div>
            </div>
            <p><small>Abra WhatsApp > Menu > Dispositivos conectados > Conectar dispositivo</small></p>
            <button class="btn secondary" onclick="closeModal('qrModal')">Fechar</button>
        </div>
    </div>

    <!-- Modal Logs -->
    <div id="logsModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <span class="close" onclick="closeModal('logsModal')">&times;</span>
            <h3>📋 Logs Detalhados</h3>
            <div id="detailedLogs" class="logs-container" style="height: 400px;">
                <!-- Logs detalhados -->
            </div>
            <button class="btn secondary" onclick="closeModal('logsModal')">Fechar</button>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="js/control-panel.js"></script>
</body>
</html>